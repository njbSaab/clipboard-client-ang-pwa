<div
  class="p-4 rounded-3xl task neumorphic active-task flex justify-between items-center"
  [ngClass]="{ 'flex-col': isEditing }"
>
  <!-- Отображение заметки -->
  <div *ngIf="!isEditing" class="flex-1 w-[85%] overflow-hidden">
    <h3 class="text-accent font-bold">{{ note.title }}</h3>
    <p
      #content
      class="text-white"
      [ngClass]="{ 'max-h-[90px] overflow-hidden': !isExpanded }"
      style="white-space: pre-wrap"
    >
      {{ note.content }}
    </p>
    <p class="text-sm text-hover-50 flex justify-between items-center">
      Создано: {{ note.createdAt | date : "short" }}

      <span
        *ngIf="isOverflowing"
        (click)="toggleExpand()"
        class="text-gray-400 mt-2 cursor-pointer flex-1 text-center arrow-icon-down"
        [ngClass]="isExpanded ? 'fas fa-angle-up' : 'fas fa-angle-down'"
      ></span>
    </p>
  </div>

  <!-- Форма редактирования -->
  <div *ngIf="isEditing" class="flex-1 w-full space-y-2">
    <input
      [(ngModel)]="editTitle"
      (keydown)="onKeydown($event)"
      placeholder="Заголовок"
      class="p-2 w-full mb-2 task-input text-hover"
    />
    <textarea
      [(ngModel)]="editContent"
      (keydown)="onKeydown($event)"
      placeholder="Содержимое"
      class="p-2 w-full mb-2 task-input text-hover-light"
      rows="4"
    ></textarea>
    <div class="flex gap-2">
      <button
        (click)="saveEdit()"
        class="button text-green-500 button-note task-button fas fa-save cursor-pointer"
      >
        <span> Сохранить </span>
      </button>
      <button
        (click)="cancelEdit()"
        class="button text-gray-500 button-note task-button fas fa-times cursor-pointer"
      >
        <span> Отмена </span>
      </button>
    </div>
  </div>

  <!-- Кнопки действий -->
  <div *ngIf="!isEditing" class="flex gap-2">
    <button
      (click)="onToggleFavorite()"
      class="button text-yellow-500 button-circle button-icon task-button cursor-pointer"
      [ngClass]="note.favorite ? 'fas fa-star' : 'far fa-star'"
    ></button>
    <button
      (click)="onEdit()"
      class="button text-blue-400 button-circle button-icon task-button fas fa-edit cursor-pointer"
    ></button>
    <button
      (click)="onDelete()"
      class="button text-red-500 button-circle button-icon task-button fas fa-trash cursor-pointer"
    ></button>
  </div>
</div>
